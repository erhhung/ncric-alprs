# .tfvars FILE CONTAINS SENSITIVE DATA AND
# MUST NOT BE CHECKED INTO SOURCE CONTROL!
#
# Copy the .tfvars.example file to .tfvars
# and set the necessary environment values.

env = "dev"

domain = "dev.astrometrics.us"

accounts = {
  dev = {
    id        = "123456789012"
    region    = "us-west-2"
    partition = "aws"
  }
  prod = {
    id        = "123456789012"
    region    = "us-gov-west-1"
    partition = "aws-us-gov"
  }
}

aws_provider = {
  profile = "alprscom"
  region  = "us-west-2"
}

# class B VPC prefix
vpc_ip_prefix = "10.0"

buckets = {
  webapp = "alprs-webapp-dev"
  config = "alprs-config-dev"
  backup = "alprs-backup-dev"
  audit  = "alprs-audit-dev"
  media  = "alprs-media-dev"
  sftp   = "alprs-sftp-dev"
}

# t3.micro:    x86,  2 vCPUs,   1 GiB, EBS only,  5 Gb/s, $.0104/hr
# t3.small:    x86,  2 vCPUs,   2 GiB, EBS only,  5 Gb/s, $.0208/hr
# t3.medium:   x86,  2 vCPUs,   4 GiB, EBS only,  5 Gb/s, $.0416/hr
# r6g.large:   ARM:  2 VCPUs,  16 GiB, EBS only, 10 Gb/s, $.1008/hr
# r6g.xlarge:  ARM,  4 vCPUs,  32 GiB, EBS only, 10 Gb/s, $.2016/hr
# r6g.2xlarge: ARM,  8 vCPUs,  64 GiB, EBS only, 10 Gb/s, $.4032/hr
# r6g.4xlarge: ARM, 16 vCPUs, 128 GiB, EBS only, 10 Gb/s, $.8064/hr
# t4g.small:   ARM:  2 VCPUs,   2 GiB, EBS only,  5 Gb/s, $.0168/hr
# t4g.medium:  ARM:  2 VCPUs,   4 GiB, EBS only,  5 Gb/s, $.0336/hr
# t4g.large:   ARM:  2 VCPUs,   8 GiB, EBS only,  5 Gb/s, $.0672/hr
# t4g.xlarge:  ARM,  4 vCPUs,  16 GiB, EBS only,  5 Gb/s, $.1344/hr
# t4g.2xlarge: ARM,  8 vCPUs,  32 GiB, EBS only,  5 Gb/s, $.2688/hr

instance_types = {
  postgresql    = "r6g.large"
  elasticsearch = "r6g.large"
  conductor     = "r6g.large"
  datastore     = "r6g.large"
  indexer       = "t4g.large"
  bastion       = "t3.medium"
  worker        = "t4g.large"
}

# https://aws.amazon.com/ec2/spot/pricing/ (roughly 1/3 of on-demand)
# t4g.small:  ARM: 2 VCPUs,  2 GiB, EBS only, 5 Gb/s, $0.0053/hr ($.0168)
# t4g.medium: ARM: 2 VCPUs,  4 GiB, EBS only, 5 Gb/s,  $0.012/hr ($.0336)
# t4g.large:  ARM: 2 VCPUs,  8 GiB, EBS only, 5 Gb/s, $0.0206/hr ($.0672)
# t4g.xlarge: ARM, 4 vCPUs, 16 GiB, EBS only, 5 Gb/s, $0.0597/hr ($.1344)

# make sure price is appropriate
# for the selected instance type
worker_max_spot_price = 0.0333

root_volume_sizes = {
  postgresql    = 32
  elasticsearch = 32
  conductor     = 32
  datastore     = 32
  indexer       = 32
  bastion       = 32
  worker        = 32
}

data_volume_sizes = {
  postgresql1   = 32
  postgresql2   = 32
  elasticsearch = 16
}

# host numbers in private subnet
private_ips = {
  postgresql1   = 11
  postgresql2   = 12
  elasticsearch = 20
  conductor     = 30
  datastore     = 40
  indexer       = 50
  bastion       = 60
  worker        = 70
}

eks_version = 1.27

eks_public_cidrs = [
  "192.55.54.32/27",
  "192.55.55.32/27"
]

# must be Graviton types
eks_node_types = [
  "t4g.medium",
  "t4g.large"
]

# currently 1 node group
eks_node_count = {
  desired = 1
  minimum = 1
  maximum = 2
}

# prevent unintentional
# instance terminations
lock_ami_versions = false

# save $ if unused
cf_enabled = true

# restrict access to US
geo_restriction = false

# AWS-owned account that is
# allowed to write ELB logs
elb_account_id = "797873946194"

# ssh_keys[0] is used to create the required EC2 key pair
# for SSH access to each instance; the remaining keys are
# simply added to each host's ~/.ssh/authorized_keys file
ssh_keys = [{
  key_name   = "alprscom-admin"
  public_key = "ssh-ed25519 ... alprscom-admin"
  }, {
  public_key = "ssh-ed25519 ... authorized-user"
}]

sftp_users = {
  # note that ed25519 keys are NOT supported
  user_name = {
    public_key = "ssh-rsa ... third-party"
    home_dir   = "user_name"
  }
}

# headless user for Rundeck jobs
auth0_user = {
  email    = "ol@dev.astrometrics.us"
  password = ""
}

# access to api.flocksafety.com
flock_user = {
  email    = "eyuan@maiveric.com"
  password = ""
}

AUTH0_M2M_CLIENT_ID         = "yVaBS1kv7281lbt1I3smwBv1Pk99bZkp"
AUTH0_M2M_CLIENT_SECRET     = ""
AUTH0_SPA_CLIENT_ID         = "kJBCfaEo0bUzBSpZJUPy4N5Jkpn4sZP4"
AUTH0_SPA_CLIENT_SECRET     = ""
AUTH0_WEBHOOK_CLIENT_ID     = "1svCeV3aZILobwXfKudB0rhvzfEHlhSM"
AUTH0_WEBHOOK_CLIENT_SECRET = ""
FONTAWESOME_NPM_TOKEN       = ""
MAPBOX_PUBLIC_TOKEN         = "pk..."
GITHUB_ACCESS_TOKEN         = "github_pat_..."
GITLAB_ACCESS_TOKEN         = "glpat-..."
ALPRS_DEVOPS_EMAIL          = "alprs.devops@maiveric.com"
ALPRS_SUPPORT_EMAIL         = "alprs.support@maiveric.com"
